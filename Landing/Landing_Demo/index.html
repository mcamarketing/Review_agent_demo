<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rekindle Pro â€” SMS Review Automation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=DM+Mono:wght@300;400&family=Manrope:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@200,0..1&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #141412;
  --surface: #1C1A17;
  --surface-2: #232018;
  --cream: #F5F0E8;
  --cream-60: rgba(245,240,232,0.6);
  --cream-20: rgba(245,240,232,0.08);
  --ember: #C4622D;
  --ember-h: #D4733E;
  --ember-glow: rgba(196,98,45,0.15);
  --border: rgba(245,240,232,0.07);
  --muted: #635D57;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--cream);
  font-family: 'Manrope', sans-serif;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* NOISE */
.noise {
  position: fixed; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.045'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 200; mix-blend-mode: overlay; opacity: 0.5;
}

/* GLOW BLOBS */
.blob {
  position: fixed; border-radius: 50%;
  pointer-events: none; z-index: 0;
}
.blob-1 { width: 50vw; height: 50vw; background: radial-gradient(circle, rgba(196,98,45,0.07) 0%, transparent 70%); top: -15%; left: -15%; }
.blob-2 { width: 40vw; height: 40vw; background: radial-gradient(circle, rgba(196,98,45,0.05) 0%, transparent 70%); bottom: -10%; right: -10%; }

/* NAV */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 50;
  height: 72px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 clamp(20px, 5vw, 72px);
  background: rgba(20,20,18,0.88);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}

.logo {
  display: flex; align-items: center; gap: 10px;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.45rem; font-weight: 400; font-style: italic;
  color: var(--cream); text-decoration: none;
}
.logo-icon {
  width: 32px; height: 32px; background: var(--ember);
  border-radius: 8px; display: flex; align-items: center; justify-content: center;
  box-shadow: 0 0 18px rgba(196,98,45,0.45);
}
.logo-icon .material-symbols-outlined { font-size: 1.1rem; color: white; font-variation-settings: 'FILL' 1; }

.nav-pill {
  font-family: 'DM Mono', monospace;
  font-size: 0.62rem; letter-spacing: 0.18em; text-transform: uppercase;
  color: var(--muted); border: 1px solid var(--border);
  padding: 6px 16px; border-radius: 999px;
}

/* HERO */
.hero {
  min-height: 100vh;
  padding: 72px clamp(20px, 5vw, 72px) 0;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
  align-items: center;
  position: relative; z-index: 1;
  border-bottom: 1px solid var(--border);
}

@media (max-width: 900px) {
  .hero { grid-template-columns: 1fr; }
  .hero-right { display: none; }
}

.hero-left { padding: 80px 0; max-width: 680px; }

.eyebrow {
  display: inline-flex; align-items: center; gap: 8px;
  font-family: 'DM Mono', monospace;
  font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--ember);
  background: rgba(196,98,45,0.1); border: 1px solid rgba(196,98,45,0.2);
  padding: 6px 14px; border-radius: 999px;
  margin-bottom: 32px;
  opacity: 0; animation: up 0.7s ease forwards 0.1s;
}
.eyebrow::before { content:''; width:6px; height:6px; border-radius:50%; background:var(--ember); animation: pulse 2s infinite; }

h1 {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(3.4rem, 6.5vw, 6.8rem);
  font-weight: 400; line-height: 0.92; letter-spacing: -0.02em;
  color: var(--cream); margin-bottom: 28px;
  opacity: 0; animation: up 0.85s ease forwards 0.25s;
}
h1 em { font-style: italic; color: var(--ember); text-shadow: 0 0 30px rgba(196,98,45,0.25); }

.hero-sub {
  font-size: 1.05rem; font-weight: 300; line-height: 1.8;
  color: var(--cream-60); max-width: 480px; margin-bottom: 44px;
  opacity: 0; animation: up 0.85s ease forwards 0.4s;
}

.cta-row {
  display: flex; align-items: center; gap: 18px; flex-wrap: wrap;
  opacity: 0; animation: up 0.85s ease forwards 0.55s;
}

.btn-cta {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 15px 30px; background: var(--ember); color: white;
  font-family: 'DM Mono', monospace; font-size: 0.7rem;
  letter-spacing: 0.14em; text-transform: uppercase; text-decoration: none;
  border-radius: 6px; border: none; cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 8px 24px rgba(196,98,45,0.3);
}
.btn-cta:hover { background: var(--ember-h); transform: translateY(-2px); box-shadow: 0 14px 32px rgba(196,98,45,0.4); }
.btn-cta .material-symbols-outlined { font-size: 1rem; }

.cta-note { font-family: 'DM Mono', monospace; font-size: 0.6rem; letter-spacing: 0.1em; color: var(--muted); }

/* PHONE MOCKUP */
.hero-right {
  display: flex; align-items: center; justify-content: center;
  position: relative; padding: 80px 0;
  opacity: 0; animation: up 1s ease forwards 0.7s;
}

.phone-aura {
  position: absolute; width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(196,98,45,0.18) 0%, transparent 70%);
  border-radius: 50%; animation: breathe 4s ease-in-out infinite;
}

.phone {
  position: relative; z-index: 2;
  width: 240px; border-radius: 36px;
  background: #0A0A09;
  border: 6px solid #2A2825;
  box-shadow: 0 0 0 1px #111, 0 30px 60px rgba(0,0,0,0.6);
  overflow: hidden;
  animation: float 6s ease-in-out infinite;
}

.phone-screen {
  background: #111;
  padding: 20px 16px 24px;
  display: flex; flex-direction: column; gap: 12px;
}

.phone-notch {
  width: 80px; height: 5px; background: #222;
  border-radius: 3px; margin: 0 auto 16px;
}

.phone-contact {
  font-family: 'Manrope', sans-serif;
  font-size: 0.65rem; font-weight: 600; text-align: center;
  color: rgba(255,255,255,0.35); letter-spacing: 0.05em; margin-bottom: 4px;
}

.sms-bubble {
  background: #1E1E1E; border-radius: 16px 16px 16px 4px;
  padding: 12px 14px; max-width: 88%;
}
.sms-bubble p { font-size: 0.78rem; line-height: 1.5; color: rgba(255,255,255,0.85); font-family: 'Manrope', sans-serif; font-weight: 300; }

.sms-reply {
  align-self: flex-end;
  background: var(--ember);
  border-radius: 16px 16px 4px 16px;
  padding: 10px 16px;
}
.sms-reply p { font-size: 0.82rem; font-weight: 600; color: white; font-family: 'Manrope', sans-serif; }

.phone-time { font-size: 0.58rem; color: rgba(255,255,255,0.25); font-family: 'DM Mono', monospace; align-self: flex-end; }

/* FLOATING BADGES */
.badge {
  position: absolute; z-index: 10;
  background: rgba(28,26,23,0.92);
  backdrop-filter: blur(12px);
  border: 1px solid var(--border);
  border-radius: 12px; padding: 10px 14px;
  display: flex; align-items: center; gap: 10px;
}
.badge-1 { top: 20%; right: 0; animation: float 4s ease-in-out infinite; }
.badge-2 { bottom: 22%; left: -10%; animation: float 5s ease-in-out 1s infinite; }

.badge-icon {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
}
.badge-icon.green { background: rgba(74,222,128,0.15); }
.badge-icon.orange { background: rgba(196,98,45,0.15); }
.badge-icon .material-symbols-outlined { font-size: 1rem; font-variation-settings: 'FILL' 1; }
.badge-icon.green .material-symbols-outlined { color: #4ade80; }
.badge-icon.orange .material-symbols-outlined { color: var(--ember); }

.badge-text p:first-child { font-size: 0.72rem; font-weight: 600; color: var(--cream); }
.badge-text p:last-child { font-family: 'DM Mono', monospace; font-size: 0.58rem; color: var(--muted); margin-top: 1px; }

/* SECTIONS */
.section {
  padding: clamp(64px, 9vw, 112px) clamp(20px, 5vw, 72px);
  position: relative; z-index: 1;
  border-bottom: 1px solid var(--border);
}

.section-tag {
  font-family: 'DM Mono', monospace;
  font-size: 0.62rem; letter-spacing: 0.22em; text-transform: uppercase;
  color: var(--ember);
  display: flex; align-items: center; gap: 14px;
  margin-bottom: 44px;
}
.section-tag::before { content:''; width:28px; height:1px; background:var(--ember); flex-shrink:0; }

/* VIDEO */
.video-section { background: var(--surface); }
.video-wrap { max-width: 960px; }
.vimeo-ratio { padding: 56.25% 0 0 0; position: relative; }
.vimeo-ratio iframe { position:absolute; top:0; left:0; width:100%; height:100%; border:none; border-radius:8px; }

/* STEPS */
.steps-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  max-width: 960px; overflow: hidden;
  border-radius: 12px; border: 1px solid var(--border);
  gap: 1px; background: var(--border);
}
.step {
  background: var(--bg); padding: 36px 28px;
  transition: background 0.3s ease; cursor: default;
}
.step:hover { background: var(--surface); }

.step-num { font-family:'DM Mono',monospace; font-size:0.58rem; letter-spacing:0.2em; color:var(--ember); margin-bottom:18px; }
.step-icon { font-family:'Material Symbols Outlined'; font-size:1.6rem; color:rgba(245,240,232,0.3); margin-bottom:14px; display:block; font-variation-settings:'FILL' 0,'wght' 200; }
.step h3 { font-family:'Cormorant Garamond',serif; font-size:1.45rem; font-weight:400; color:var(--cream); margin-bottom:8px; }
.step p { font-size:0.85rem; font-weight:300; color:var(--cream-60); line-height:1.65; }

/* PRICING + FEATURES */
.pf-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 56px; max-width: 960px; align-items: start;
}
@media (max-width: 760px) { .pf-grid { grid-template-columns: 1fr; } }

.pf-section { background: var(--surface); }

.pricing-card {
  background: var(--surface-2); border: 1px solid var(--border);
  border-radius: 16px; padding: 40px; position: relative; overflow: hidden;
}
.pricing-card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:1px;
  background: linear-gradient(90deg, transparent, var(--ember) 50%, transparent);
  opacity: 0.7;
}

.pricing-eyebrow {
  font-family:'DM Mono',monospace; font-size:0.6rem; letter-spacing:0.2em; text-transform:uppercase;
  color:var(--ember); display:flex; align-items:center; gap:8px; margin-bottom:20px;
}
.pricing-eyebrow::before { content:''; width:6px; height:6px; border-radius:50%; background:var(--ember); }

.price-num { font-family:'Cormorant Garamond',serif; font-size:5.5rem; font-weight:300; line-height:1; color:var(--cream); }
.price-unit { font-size:0.95rem; font-weight:300; color:var(--cream-60); margin-left:6px; }
.price-note { font-family:'DM Mono',monospace; font-size:0.6rem; letter-spacing:0.1em; color:var(--muted); margin-top:8px; margin-bottom:24px; }

.divider { height:1px; background:var(--border); margin:20px 0; }

.check-list { list-style:none; display:flex; flex-direction:column; gap:13px; }
.check-list li { display:flex; align-items:center; gap:12px; font-size:0.92rem; font-weight:300; color:var(--cream); }
.check-list li .material-symbols-outlined { font-size:1.05rem; color:var(--ember); font-variation-settings:'FILL' 1; flex-shrink:0; }

.features-right h2 {
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(2rem,3.5vw,3rem); font-weight:400; line-height:1.1;
  color:var(--cream); margin-bottom:36px;
}
.features-right h2 em { font-style:italic; color:var(--cream-60); }

.features-mini { display:grid; grid-template-columns:1fr 1fr; gap:28px; }
.feature-mini { display:flex; flex-direction:column; gap:8px; }
.feature-mini .material-symbols-outlined { font-size:1.4rem; color:var(--ember); font-variation-settings:'FILL' 0,'wght' 200; }
.feature-mini h4 { font-family:'Cormorant Garamond',serif; font-size:1.15rem; font-weight:500; color:var(--cream); }
.feature-mini p { font-size:0.8rem; font-weight:300; color:var(--cream-60); line-height:1.65; }

/* SIGN */
.sign-section { background: var(--bg); }
.sign-header { max-width: 520px; margin-bottom: 48px; }
.sign-header h2 { font-family:'Cormorant Garamond',serif; font-size:clamp(2.8rem,5vw,4.5rem); font-weight:400; line-height:1.05; color:var(--cream); margin-bottom:12px; }
.sign-header h2 em { font-style:italic; color:var(--ember); }
.sign-header p { font-size:0.95rem; font-weight:300; color:var(--cream-60); line-height:1.7; }

.signable-frame {
  max-width: 900px; border:1px solid var(--border);
  border-radius:10px; overflow:hidden; background:var(--surface);
}

/* FOOTER */
footer {
  padding: 36px clamp(20px, 5vw, 72px);
  border-top: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
  flex-wrap: wrap; gap: 16px; position:relative; z-index:1;
}
.footer-links { display:flex; gap:20px; }
.footer-links a { font-family:'DM Mono',monospace; font-size:0.6rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--muted); text-decoration:none; transition:color 0.2s; }
.footer-links a:hover { color:var(--ember); }
footer p { font-family:'DM Mono',monospace; font-size:0.58rem; letter-spacing:0.1em; color:var(--muted); }

/* REVEAL */
.reveal { opacity:0; transform:translateY(16px); transition:opacity 0.65s ease, transform 0.65s ease; }
.reveal.in { opacity:1; transform:none; }

/* ANIMS */
@keyframes up { from { opacity:0; transform:translateY(22px); } to { opacity:1; transform:none; } }
@keyframes float { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-16px); } }
@keyframes breathe { 0%,100% { transform:scale(1); opacity:0.8; } 50% { transform:scale(1.08); opacity:1; } }
@keyframes pulse { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.5; transform:scale(0.8); } }

::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:var(--surface-2); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:var(--ember); }
</style>
</head>
<body>
<div class="noise"></div>
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>

<!-- NAV -->
<nav>
  <a class="logo" href="#">
    <div class="logo-icon"><span class="material-symbols-outlined">local_fire_department</span></div>
    Rekindle Pro
  </a>
  <div class="nav-pill">SMS Review Automation</div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-left">
    <div class="eyebrow">You just experienced it firsthand</div>
    <h1>Now imagine every<br><em>customer</em><br>gets this.</h1>
    <p class="hero-sub">That SMS you just received? That's exactly what your customers get after every visit â€” automatically. Good reviews captured. Bad ones handled before they go online.</p>
    <div class="cta-row">
      <a href="#" class="btn-cta" onclick="showDemoForm(); return false;">
        Start for Â£0 today
        <span class="material-symbols-outlined">arrow_downward</span>
      </a>
      <span class="cta-note">No upfront fees Â· Live in 24hrs</span>
    </div>
    
    <div class="hero-right">
    <div class="phone-aura"></div>

    <!-- Phone -->
    <div class="phone">
      <div class="phone-screen">
        <div class="phone-notch"></div>
        <div class="phone-contact">RekindlePro</div>
        <div class="sms-bubble">
          <p>Hi Jamie, thanks for visiting Table &amp; Candles. How was everything? Reply GOOD or BAD ðŸ™‚</p>
        </div>
        <div class="phone-time">09:41</div>
        <div class="sms-reply">
          <p>GOOD</p>
        </div>
        <div class="phone-time">09:42</div>
        <div class="sms-bubble">
          <p>Amazing! Leave a quick review here ðŸ‘‰ rekindlepro.com/reviews</p>
        </div>
      </div>
    </div>

    <!-- Badge 1 -->
    <div class="badge badge-1">
      <div class="badge-icon green"><span class="material-symbols-outlined">star</span></div>
      <div class="badge-text">
        <p>New 5-Star Review</p>
        <p>Just now Â· Google</p>
      </div>
    </div>

    <!-- Badge 2 -->
    <div class="badge badge-2">
      <div class="badge-icon orange"><span class="material-symbols-outlined">sms</span></div>
      <div class="badge-text">
        <p>SMS Delivered</p>
        <p>98% open rate</p>
      </div>
    </div>
  </div>
</section>

<!-- VIDEO -->
<section class="section video-section">
  <p class="section-tag reveal">See how it works</p>
  <div class="video-wrap reveal">
    <div class="vimeo-ratio">
      <iframe src="https://player.vimeo.com/video/1165853028?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share" referrerpolicy="strict-origin-when-cross-origin" title="The_Reputation_Filter"></iframe>
    </div>
  </div>
</section>
<script src="https://player.vimeo.com/api/player.js"></script>

<!-- HOW IT WORKS -->
<section class="section">
  <p class="section-tag reveal">How it works</p>
  <div class="steps-grid reveal">
    <div class="step">
      <p class="step-num">01 â€”</p>
      <span class="step-icon material-symbols-outlined">storefront</span>
      <h3>Customer visits</h3>
      <p>After their visit, a personalised SMS lands in their pocket within minutes.</p>
    </div>
    <div class="step">
      <p class="step-num">02 â€”</p>
      <span class="step-icon material-symbols-outlined">chat_bubble_outline</span>
      <h3>They reply</h3>
      <p>One word. GOOD or BAD. That's all they need to do.</p>
    </div>
    <div class="step">
      <p class="step-num">03 â€”</p>
      <span class="step-icon material-symbols-outlined">reviews</span>
      <h3>Reviews captured</h3>
      <p>Happy customers go straight to your review page. Unhappy ones trigger a recovery message.</p>
    </div>
    <div class="step">
      <p class="step-num">04 â€”</p>
      <span class="step-icon material-symbols-outlined">trending_up</span>
      <h3>You grow</h3>
      <p>More 5-star reviews. Fewer bad ones going public. Completely on autopilot.</p>
    </div>
  </div>
</section>

<!-- PRICING + FEATURES -->
<section class="section pf-section">
  <p class="section-tag reveal">Pricing & what's included</p>
  <div class="pf-grid">
    <div class="pricing-card reveal">
      <div class="pricing-eyebrow">Fair Pricing</div>
      <div>
        <span class="price-num">Â£2.50</span>
        <span class="price-unit">/ review captured</span>
      </div>
      <p class="price-note">Only pay for results. Nothing if no reviews come in.</p>
      <div class="divider"></div>
      <ul class="check-list">
        <li><span class="material-symbols-outlined">check_circle</span>No monthly subscription fees</li>
        <li><span class="material-symbols-outlined">check_circle</span>Cancel anytime, instantly</li>
        <li><span class="material-symbols-outlined">check_circle</span>Unlimited SMS messages included</li>
        <li><span class="material-symbols-outlined">check_circle</span>Full setup done for you in 24 hours</li>
      </ul>
    </div>

    <div class="features-right reveal">
      <h2>Everything you need,<br><em>nothing you don't.</em></h2>
      <div class="features-mini">
        <div class="feature-mini">
          <span class="material-symbols-outlined">smartphone</span>
          <h4>No App Required</h4>
          <p>Works on every phone. No downloads, no logins, no friction.</p>
        </div>
        <div class="feature-mini">
          <span class="material-symbols-outlined">bolt</span>
          <h4>Instant Feedback</h4>
          <p>Catch unhappy customers before they write a public review.</p>
        </div>
        <div class="feature-mini">
          <span class="material-symbols-outlined">security</span>
          <h4>GDPR Compliant</h4>
          <p>Fully secure. Your customer data stays yours.</p>
        </div>
        <div class="feature-mini">
          <span class="material-symbols-outlined">bar_chart</span>
          <h4>Weekly Reports</h4>
          <p>Simple analytics to your inbox every Monday morning.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<footer>
  <a class="logo" href="#" style="opacity:0.45;font-size:1.2rem;">
    <div class="logo-icon" style="width:24px;height:24px;"><span class="material-symbols-outlined" style="font-size:0.85rem;">local_fire_department</span></div>
    Rekindle Pro
  </a>
  <div class="footer-links">
    <a href="#">Privacy</a>
    <a href="#">Terms</a>
    <a href="https://wa.me/447903573675" target="_blank">WhatsApp</a>
  </div>
  <p>Â© 2025 Rekindle Pro</p>
</footer>

<!-- Simple Custom Chat Widget -->
<div id="chat-widget" class="chat-widget-container">
  <div class="chat-toggle" onclick="toggleChat()">
    <span class="material-symbols-outlined">chat</span>
  </div>
  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <h3>Rekindle Pro Demo</h3>
      <button onclick="toggleChat()" class="chat-close">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="chat-message bot">
        <p>Hi! How can I help you with Rekindle Pro today?</p>
      </div>
    </div>
    <div class="chat-input-container">
      <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
      <button onclick="sendMessage()" class="chat-send">
        <span class="material-symbols-outlined">send</span>
      </button>
    </div>
  </div>
</div>

<style>
  .chat-widget-container {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 100;
  }
  
  .chat-toggle {
    width: 56px;
    height: 56px;
    background: #C4622D;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(196,98,45,0.4);
    transition: all 0.25s ease;
  }
  
  .chat-toggle:hover {
    background: #D4733E;
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(196,98,45,0.5);
  }
  
  .chat-toggle .material-symbols-outlined {
    color: white;
    font-size: 24px;
  }
  
  .chat-window {
    position: absolute;
    bottom: 70px;
    right: 0;
    width: 380px;
    height: 500px;
    background: #1C1A17;
    border: 1px solid rgba(245,240,232,0.07);
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    display: none;
    flex-direction: column;
    overflow: hidden;
  }
  
  .chat-window.active {
    display: flex;
  }
  
  .chat-header {
    background: #141412;
    border-bottom: 1px solid rgba(245,240,232,0.07);
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .chat-header h3 {
    color: #F5F0E8;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.25rem;
    font-weight: 400;
    margin: 0;
  }
  
  .chat-close {
    background: none;
    border: none;
    color: rgba(245,240,232,0.6);
    cursor: pointer;
    padding: 4px;
    transition: color 0.2s;
  }
  
  .chat-close:hover {
    color: #C4622D;
  }
  
  .chat-messages {
    flex: 1;
    background: #141412;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .chat-message {
    max-width: 80%;
    padding: 12px 16px;
    border-radius: 16px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.9rem;
    line-height: 1.5;
  }
  
  .chat-message.bot {
    background: #232018;
    color: #F5F0E8;
    border: 1px solid rgba(245,240,232,0.07);
    border-radius: 16px 16px 16px 4px;
    align-self: flex-start;
  }
  
  .chat-message.user {
    background: #C4622D;
    color: white;
    border-radius: 16px 16px 4px 16px;
    align-self: flex-end;
  }
  
  .chat-message p {
    margin: 0;
  }
  
  .chat-input-container {
    background: #1C1A17;
    border-top: 1px solid rgba(245,240,232,0.07);
    padding: 16px 20px;
    display: flex;
    gap: 12px;
  }
  
  .chat-input-container input {
    flex: 1;
    background: #141412;
    border: 1px solid rgba(245,240,232,0.07);
    border-radius: 10px;
    padding: 12px 16px;
    color: #F5F0E8;
    font-family: 'Manrope', sans-serif;
    font-size: 0.9rem;
    outline: none;
  }
  
  .chat-input-container input::placeholder {
    color: #635D57;
  }
  
  .chat-input-container input:focus {
    border-color: #C4622D;
  }
  
  .chat-send {
    background: #C4622D;
    border: none;
    border-radius: 10px;
    padding: 12px;
    cursor: pointer;
    transition: background 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .chat-send:hover {
    background: #D4733E;
  }
  
  .chat-send .material-symbols-outlined {
    color: white;
    font-size: 20px;
  }
  
  @media (max-width: 600px) {
    .chat-window {
      width: calc(100vw - 48px);
      height: 70vh;
      right: -12px;
    }
  }
</style>

<script>
  let chatOpen = false;
  
  function toggleChat() {
    chatOpen = !chatOpen;
    document.getElementById('chatWindow').classList.toggle('active', chatOpen);
  }
  
  function handleKeyPress(e) {
    if (e.key === 'Enter') {
      sendMessage();
    }
  }
  
  async function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    if (!message) return;
    
    // Add user message
    addMessage(message, 'user');
    input.value = '';
    
    // Show typing indicator
    const typingId = addTypingIndicator();
    
    try {
      // Send to n8n webhook
      const response = await fetch('https://n8n.srv1334356.hstgr.cloud/webhook/client-support/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
          message: message, 
          sessionId: 'landing-' + Date.now(),
          timestamp: new Date().toISOString() 
        })
      });
      
      // Remove typing indicator
      removeTypingIndicator(typingId);
      
      if (response.ok) {
        const data = await response.json();
        // Handle various response formats from n8n
        let replyText = '';
        if (typeof data === 'string') {
          replyText = data;
        } else if (data.message) {
          replyText = data.message;
        } else if (data.output) {
          replyText = data.output;
        } else if (data.text) {
          replyText = data.text;
        } else if (data.response) {
          replyText = data.response;
        } else {
          replyText = JSON.stringify(data);
        }
        addMessage(replyText || 'How can I help you today?', 'bot');
      } else {
        addMessage('I'm here to help! What would you like to know about Rekindle Pro?', 'bot');
      }
    } catch (error) {
      console.error('Chat error:', error);
      removeTypingIndicator(typingId);
      addMessage('I'm here to help! What would you like to know about Rekindle Pro?', 'bot');
    }
  }
  
  function addMessage(text, sender) {
    const container = document.getElementById('chatMessages');
    const msgDiv = document.createElement('div');
    msgDiv.className = `chat-message ${sender}`;
    msgDiv.innerHTML = `<p>${escapeHtml(text)}</p>`;
    container.appendChild(msgDiv);
    container.scrollTop = container.scrollHeight;
  }
  
  function addTypingIndicator() {
    const container = document.getElementById('chatMessages');
    const id = 'typing-' + Date.now();
    const typingDiv = document.createElement('div');
    typingDiv.id = id;
    typingDiv.className = 'chat-message bot';
    typingDiv.innerHTML = '<p style="opacity: 0.6;">Typing...</p>';
    container.appendChild(typingDiv);
    container.scrollTop = container.scrollHeight;
    return id;
  }
  
  function removeTypingIndicator(id) {
    const el = document.getElementById(id);
    if (el) el.remove();
  }
  
  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
</script>

<script>
  // Personalization from URL params
  const params = new URLSearchParams(window.location.search);
  const clientName = params.get('name') || 'Restaurant Owner';
  const companyName = params.get('company') || 'Your Restaurant';
  
  // Update personalized content
  document.addEventListener('DOMContentLoaded', () => {
    // Update hero eyebrow
    const eyebrow = document.querySelector('.eyebrow');
    if (eyebrow && clientName !== 'Restaurant Owner') {
      eyebrow.innerHTML = `<span style="width:6px;height:6px;border-radius:50%;background:var(--ember);animation:pulse 2s infinite;margin-right:4px;"></span>Hi ${clientName}, you just experienced this`;
    }
    
    // Update phone mockup with company name
    const phoneContact = document.querySelector('.phone-contact');
    if (phoneContact && companyName !== 'Your Restaurant') {
      phoneContact.textContent = companyName;
    }
    
    // Update SMS bubbles with company name
    const smsBubbles = document.querySelectorAll('.sms-bubble p');
    if (smsBubbles.length > 0 && companyName !== 'Your Restaurant') {
      smsBubbles[0].innerHTML = `Hi Jamie, thanks for visiting ${companyName}. How was everything? Reply GOOD or BAD ðŸ™‚`;
    }
    
    // Update sign section header
    const signHeader = document.querySelector('.sign-header h2');
    if (signHeader && clientName !== 'Restaurant Owner') {
      signHeader.innerHTML = `Ready to get started,<br><em>${clientName}?</em>`;
    }
  });

  // Scroll reveal
  const obs = new IntersectionObserver(entries => {
    entries.forEach((e, i) => {
      if (e.isIntersecting) {
        setTimeout(() => e.target.classList.add('in'), i * 60);
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
</script>

<!-- Demo Form Modal -->
<div id="demo-modal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="hideDemoForm()">Ã—</button>
    <h2>Try the Demo</h2>
    <p>Enter your details to receive the SMS demo instantly.</p>
    <form id="demo-form" onsubmit="submitDemoForm(event)">
      <div class="form-group">
        <label>First Name</label>
        <input type="text" name="first_name" required placeholder="Your name">
      </div>
      <div class="form-group">
        <label>Business Name</label>
        <input type="text" name="business" required placeholder="Your business">
      </div>
      <div class="form-group">
        <label>Phone Number</label>
        <input type="tel" name="phone" required placeholder="+447000000000">
      </div>
      <button type="submit" class="btn-submit">Send Me the Demo SMS</button>
    </form>
    <p class="form-note">We'll send you an SMS. Reply GOOD or BAD to see the automation in action.</p>
  </div>
</div>

<style>
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.modal.active { display: flex; }
.modal-content {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 40px;
  max-width: 420px;
  width: 100%;
  position: relative;
}
.modal-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  color: var(--cream-60);
  font-size: 24px;
  cursor: pointer;
}
.modal-content h2 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.8rem;
  color: var(--cream);
  margin-bottom: 8px;
}
.modal-content > p {
  color: var(--cream-60);
  font-size: 0.9rem;
  margin-bottom: 24px;
}
.form-group {
  margin-bottom: 16px;
}
.form-group label {
  display: block;
  font-family: 'DM Mono', monospace;
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--cream-60);
  margin-bottom: 6px;
}
.form-group input {
  width: 100%;
  padding: 14px 16px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--cream);
  font-size: 1rem;
  font-family: 'Manrope', sans-serif;
}
.form-group input:focus {
  outline: none;
  border-color: var(--ember);
}
.btn-submit {
  width: 100%;
  padding: 16px;
  background: var(--ember);
  border: none;
  border-radius: 8px;
  color: white;
  font-family: 'DM Mono', monospace;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  cursor: pointer;
  margin-top: 8px;
}
.btn-submit:hover {
  background: var(--ember-h);
}
.form-note {
  font-size: 0.75rem;
  color: var(--muted);
  text-align: center;
  margin-top: 16px;
}
</style>

<script>
function showDemoForm() {
  document.getElementById('demo-modal').classList.add('active');
}
function hideDemoForm() {
  document.getElementById('demo-modal').classList.remove('active');
}
async function submitDemoForm(e) {
  e.preventDefault();
  const form = e.target;
  const data = {
    first_name: form.first_name.value,
    business: form.business.value,
    phone: form.phone.value,
    demo: true
  };
  const btn = form.querySelector('.btn-submit');
  btn.textContent = 'Sending...';
  btn.disabled = true;
  try {
    await fetch('https://n8n.srv1334356.hstgr.cloud/webhook/review-demo-trigger/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    hideDemoForm();
    alert('SMS sent! Check your phone.');
  } catch(err) {
    alert('Error sending SMS. Please try again.');
  }
  btn.textContent = 'Send Me the Demo SMS';
  btn.disabled = false;
}
</script>
</body>
</html>
